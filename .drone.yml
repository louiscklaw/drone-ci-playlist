# inserted by test hello-merger/.drone.yml start
kind: pipeline
type: docker
name: hello-merger

steps:
- name: hello-merger
  image: logickee/ubuntu-basic
  commands:
  - git clone https://$GITHUB_TOKEN@github.com/louiscklaw/drone-ci-playlist.git /tmp/test_git_dir

  - cd hello-merger
  -   pipenv run python3 ./src/main.py /tmp/test_git_dir

  - cd /tmp/test_git_dir
  -   git remote set-url origin https://$GITHUB_TOKEN@github.com/louiscklaw/drone-ci-playlist.git
  -   git push

  environment:
    GITHUB_TOKEN:
      from_secret: GITHUB_TOKEN

---
kind: secret
name: GITHUB_TOKEN
data: KahdXW1UO0TePy8Fh5BQ0ghArK0X3JYtDP3aQMCyrt9fX0gYLWv8Qp1p4f4uzXt+mgKWXIQTVuH1RfvX7UwIOxNxWHI=

# inserted by test hello-merger/.drone.yml end
---
# inserted by test helloworld-rpi/.drone.yml start
kind: pipeline
type: docker
name: helloworld-rpi

platform:
  os: linux
  arch: arm

steps:
- name: helloworld
  image: alpine
  commands:
  - echo hello
  - echo world

# inserted by test helloworld-rpi/.drone.yml end
---
# inserted by test hello_failure/.drone.yml start

kind: pipeline
type: docker
name: hello_failure

steps:
- name: hello_failure
  failure: ignore
  image: ubuntu
  commands:
  - ./hello_failure/fail.sh

# inserted by test hello_failure/.drone.yml end
---
# inserted by test hello-secrets/.drone.yml start

kind: pipeline
name: hello-secrets

steps:
- name: build
  image: ubuntu
  environment:
    HELLO:
      from_secret: hello

  commands:
  - echo $HELLO

---
kind: secret
name: hello
data: fRBBQR1N0FejBRMwbnYCrzDDqKQLvYLcPmKmXSxoUIcv

# inserted by test hello-secrets/.drone.yml end
---
# inserted by test helloworld/.drone.yml start

kind: pipeline
type: docker
name: helloworld

steps:
- name: helloworld
  image: alpine
  commands:
  - echo hello
  - echo world

# inserted by test helloworld/.drone.yml end